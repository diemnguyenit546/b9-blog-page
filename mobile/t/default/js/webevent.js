var webEventList=[];var webEventWidth=0;function showWebEvent(mode){close_popup();$('#divWebEvent').html('');if($('#popupLayer > iframe').length){$('#popupLayer > iframe').attr('src',$('#popupLayer > iframe').attr('src'));}
if(webEventList.length>0){var str='';var closeStr='';closeStr='<a href="javascript:void(0);" onclick="showWebEvent(\''+mode+'\');"><img src="'+imgPath+'images/close.png" style="position:absolute;width:25px;height25px;top:0px;right:0px;"></a>';if(webEventList[0].embeddedvideo==0){if(mode=='mobile'){str+='<img id="webEventBanner" src="'+webEventList[0].image+'" style="width:100%;height:auto;">';}else{str+='<img id="webEventBanner" src="'+webEventList[0].image+'">';}
if(webEventList[0].url!=undefined&&webEventList[0].url!=''){if(webEventList[0].url=='a/ssoTournament'){str='<div style="cursor:pointer;" onclick="window.open(\''+webEventList[0].url+'\');">'+str;}else{str='<div style="cursor:pointer;" onclick="window.location=\''+webEventList[0].url+'\';">'+str;}}
str+='</div>';}else{str+=webEventList[0].url;}
str=closeStr+str;$('#divWebEvent').html(str);setTimeout(function(){if(webEventList[0].embeddedvideo==0){var pic_real_width,pic_real_height;if(mode=='mobile'){$("<img/>").attr("src",webEventList[0].image).load(function(){pic_real_width=(window.innerWidth>0)?window.innerWidth:screen.width;show_popup($('#divWebEvent').html(),pic_real_width-15);});}else{$("<img/>").attr("src",webEventList[0].image).load(function(){pic_real_width=this.width+webEventWidth;pic_real_height=this.height;show_popup($('#divWebEvent').html(),pic_real_width);});}}else{if(mode=='mobile'){$('#divWebEvent > iframe').attr("width","100%");var wd=(window.innerWidth>0)?window.innerWidth:screen.width;}else{var wd=webEventWidth+parseFloat($('#divWebEvent > iframe').attr('width'));}
show_popup($('#divWebEvent').html(),wd);}
webEventList.shift();},500);}}
webevent=function(data){if(data!==undefined){resp=$.parseJSON(data);if(resp.d.status==0&&typeof(resp.d.webevent)!="undefined"&&resp.d.webevent!==null){$.each(resp.d.webevent,function(key,v){if(v.content!=undefined){if(v.content.embeddedvideo=='1'){webEventList.push({image:'',url:v.content.url,embeddedvideo:1});}else{$.each(v.content.desktop_banner,function(k,b){webEventList.push({image:resp.d.imgPath+b,url:v.content.url,embeddedvideo:0});});}}});showWebEvent('desktop');$("#masklayer").click(function(){showWebEvent('desktop');});}}}
webeventMobile=function(data){if(data!==undefined){resp=$.parseJSON(data);if(resp.d.status==0&&typeof(resp.d.webevent)!="undefined"&&resp.d.webevent!==null){$.each(resp.d.webevent,function(key,v){if(v.content!=undefined){if(v.content.embeddedvideo=='1'){webEventList.push({image:'',url:v.content.url,embeddedvideo:1});}else{$.each(v.content.mobile_banner,function(k,b){webEventList.push({image:resp.d.imgPath+b,url:v.content.url,embeddedvideo:0});});}}});showWebEvent('mobile');$("#masklayer").click(function(){showWebEvent('mobile');});}}}